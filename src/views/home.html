<!doctype html>
<html>
<head>
	<meta charset="utf-8" />
	<title>URL Shortener</title>
</head>
<body>
	<h1>URL Shortener</h1>
	<form id="shortenForm">
		<input type="url" id="url" placeholder="https://example.com" required style="width:300px"/>
		<button type="submit">Shorten</button>
	</form>
	<p id="result"></p>

	<script>
		document.getElementById('shortenForm').addEventListener('submit', async (e) => {
			e.preventDefault();
			const url = document.getElementById('url').value;
			const res = await fetch('/api/shorten', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify({ url })
			});
			const data = await res.json();
			if (res.ok) {
				document.getElementById('result').innerHTML = 'Short URL: <a href="' + data.shortUrl + '">' + data.shortUrl + '</a>';
			} else {
				document.getElementById('result').textContent = data.error || 'Error';
			}
		});
	</script>
</body>
</html>
